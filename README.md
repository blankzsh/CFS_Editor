# CFS球队编辑器 - Rust版本

这是使用Rust语言重构的CFS球队编辑器，原始版本是使用Python和PySide6开发的。本版本提供更流畅的用户体验和更丰富的功能。

## 功能特性

### 基础功能
- 加载和编辑CFS数据库中的球队信息
- 编辑球队基本信息（名称、财富、成立年份等）
- 查看和编辑球队员工信息
- 更换球队Logo
- 导出球队列表到CSV文件

### 新增功能
- **Mac风格UI**：现代化的界面设计，提供更好的视觉体验
- **优化的三栏布局**：左侧球队列表、中间主内容、右侧员工列表，确保各面板不会相互覆盖
- **自适应界面**：各面板能够根据窗口大小动态调整，确保内容完整显示
- **批量编辑**：一次性修改多个球队的属性
- **搜索过滤**：按名称、地区、联赛等条件快速筛选球队
- **数据可视化**：直观展示球队财富、支持者数量等数据分布
- **自动保存**：可选的自动保存功能，防止数据丢失
- **高级筛选**：按财富范围、成立年份等进行高级筛选

## 技术栈

- Rust 编程语言
- egui/eframe 用于GUI界面
- rusqlite 用于SQLite数据库操作
- image 用于图像处理
- native-dialog 用于原生文件对话框
- serde/serde_json 用于JSON处理
- log/env_logger 用于日志记录

## 构建与运行

### 依赖项

- Rust 和 Cargo (推荐使用 [rustup](https://rustup.rs/) 安装)

### 编译与运行

```bash
# 克隆仓库
git clone https://github.com/blankzsh/CFS_Editor.git
cd rust-cfs

# 编译
cargo build --release

# 运行
cargo run --release
```

## 使用方法

### 基本操作
1. 点击"加载数据库"按钮选择CFS数据库文件（.db）
2. 在左侧列表中选择要编辑的球队
3. 在中间面板中编辑球队信息
4. 右侧面板显示所选球队的员工信息
5. 点击"保存球队修改"按钮保存修改
6. 双击员工记录可以编辑员工信息
7. 点击Logo区域可以更换球队Logo

### 高级功能
1. **批量编辑**：点击"批量编辑"按钮，选择多个球队进行批量属性修改
2. **搜索过滤**：在搜索框中输入关键词，选择过滤字段（名称、地区、联赛等）
3. **数据可视化**：点击顶部"数据可视化"标签页查看数据分析图表
4. **自动保存**：点击"自动保存"按钮开启/关闭自动保存功能，可设置自动保存间隔
5. **导出列表**：点击"导出列表"按钮将当前球队列表导出为CSV文件

### 快捷操作
- 使用搜索框快速定位球队
- 点击列表标题可以按照不同属性排序
- 显示高级过滤选项可以进行更精细的筛选

## 界面说明

- **顶部工具栏**：包含主要功能按钮和状态信息
- **左侧面板**：显示球队列表和搜索过滤功能
- **中央面板**：
  - **球队详情标签页**：编辑球队基本信息和Logo
  - **数据可视化标签页**：查看数据统计图表
  - **杂项编辑器标签页**：目前功能暂不可用
- **右侧面板**：显示所选球队的员工信息
- **底部状态栏**：显示当前操作状态和自动保存倒计时

## 最新更新

### 界面布局优化
- 改进了整体界面为水平三栏布局（左侧球队列表、中间主内容、右侧员工列表）
- 解决了左侧面板覆盖右侧面板的问题
- 调整了初始窗口大小为1200x900，便于查看更多内容
- 各面板现在能够随窗口大小动态调整，确保内容完整显示
- 为各UI元素设置了合理的最小/最大宽度，优化了显示效果

### 功能调整
- 暂时移除了杂项编辑器功能（与数据库连接存在问题），但保留了UI中的选项卡
- 当没有员工数据时，员工信息面板现在会显示适当的提示
- 优化了自动保存功能和状态显示

## 常见问题

1. **无法加载数据库**：确保选择的是有效的CFS数据库文件
2. **图片无法加载**：检查数据库目录下是否存在对应的Logo图片文件
3. **批量编辑无效**：确保已正确选择了要编辑的球队和属性
4. **杂项编辑器不可用**：该功能目前正在维护中，将在后续版本中恢复

## 作者

- 原作者: 卡尔纳斯
- Rust版本: 1.28.2

## 许可证

本项目采用 MIT 许可证 